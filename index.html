<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="box">
<h2>Login</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p>New? <a href="signup.html">Signup</a></p>
</div>

<script type="module">
import { auth, db } from "./config.js";
import { signInWithEmailAndPassword } from
"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { doc, getDoc } from
"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

window.login = async () =>{
  const res = await signInWithEmailAndPassword(auth,email.value,password.value);
  const snap = await getDoc(doc(db,"users",res.user.uid));
  snap.data().role=="admin"
   ? location.href="admin.html"
   : location.href="dashboard.html";
}
</script>
</body>
</html>
