<!-- Install Button -->
<button onclick="completeOffer(101)">
  Install App â†’ Earn 1 Coin
</button>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
/* ðŸ”¹ SUPABASE INIT */
const supabase = window.supabase.createClient(
  "https://YOUR_PROJECT_ID.supabase.co",
  "YOUR_PUBLIC_ANON_KEY"
);

/* ðŸ”¹ TELEGRAM LOGIN (PERMANENT) */
const tg = window.Telegram.WebApp;
tg.expand();

const tgUser = tg.initDataUnsafe.user;

if (tgUser) {
  localStorage.setItem("telegram_id", tgUser.id);
  localStorage.setItem("username", tgUser.username || "");

  // create user if not exists
  supabase.from("users").upsert({
    telegram_id: tgUser.id,
    username: tgUser.username || "",
    balance: 0
  });
}
</script>
