<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>XDEVIL EARNING</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Telegram Mini App -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Monetag SDK (Rewarded only) -->
<script src="//libtl.com/sdk.js"
        data-zone="10511608"
        data-sdk="show_10511608"></script>

<style>
body{margin:0;font-family:Arial;background:#f2f5ff}
header{background:#0a5cff;color:#fff;padding:14px;text-align:center;font-size:20px;font-weight:bold}
nav{position:fixed;bottom:0;left:0;width:100%;display:flex;background:#fff;border-top:1px solid #ccc}
nav button{flex:1;padding:12px;border:none;background:none}
nav button.active{color:#0a5cff;font-weight:bold}
section{display:none;padding:15px;padding-bottom:80px}
section.active{display:block}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px;box-shadow:0 5px 15px rgba(0,0,0,.1)}
.balance{font-size:32px;color:#0a5cff;font-weight:bold}
.btn{display:block;width:100%;padding:12px;margin-top:10px;background:#0a5cff;color:#fff;border:none;border-radius:10px;font-size:15px}
input,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #ccc}
.note{font-size:13px;color:#666}
</style>
</head>

<body>

<header>XDEVIL EARNING</header>

<!-- HOME -->
<section id="home" class="active">
  <div class="card">
    <h3>Wallet Balance</h3>
    <div class="balance">â‚¹<span id="balance">0.00</span></div>
    <p class="note">Balance updates after offer completion</p>
  </div>
</section>

<!-- EARNING -->
<section id="earn">
  <div class="card">
    <h3>Watch & Earn</h3>
    <p>Watch full ad and earn reward</p>
    <button class="btn" onclick="watchAd()">â–¶ Watch Ad</button>
  </div>

  <div class="card">
    <h3>Install App Offer</h3>
    <p>Install & open app once</p>
    <button class="btn" onclick="installAd()">ðŸ“² Install App</button>
  </div>
</section>

<!-- PROFILE -->
<section id="profile">
  <div class="card">
    <h3>User Profile</h3>
    <p><b>Telegram ID:</b> <span id="tgid"></span></p>
    <p><b>Status:</b> Active</p>
  </div>
</section>

<!-- WITHDRAW -->
<section id="withdraw">
  <div class="card">
    <h3>Withdraw Funds</h3>
    <p class="note">Minimum withdrawal â‚¹399</p>

    <form onsubmit="return submitWithdraw()">
      <input type="text" id="name" placeholder="Full Name" required>
      <input type="email" id="email" placeholder="Email" required>
      <input type="text" id="upi" placeholder="UPI ID" required>
      <input type="number" id="amount" placeholder="Amount" required>
      <button class="btn">Submit Request</button>
    </form>
  </div>
</section>

<nav>
  <button class="active" onclick="show('home',this)">Home</button>
  <button onclick="show('earn',this)">Earning</button>
  <button onclick="show('profile',this)">Profile</button>
  <button onclick="show('withdraw',this)">Withdraw</button>
</nav>

<script>
/* TELEGRAM INIT */
Telegram.WebApp.ready()
const user = Telegram.WebApp.initDataUnsafe?.user
if(!user){ alert("Open inside Telegram"); throw "Not Telegram" }

const telegram_id = user.id.toString()
document.getElementById("tgid").innerText = telegram_id

/* BALANCE (demo â€“ backend se aayega) */
let balance = 0
document.getElementById("balance").innerText = balance.toFixed(2)

/* NAV */
function show(id,btn){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"))
  document.getElementById(id).classList.add("active")
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"))
  btn.classList.add("active")
}

/* ADS */
function watchAd(){
  show_10511608({
    ymid: telegram_id,
    request_var: "watch_ad"
  })
}

function installAd(){
  show_10511608({
    ymid: telegram_id,
    request_var: "install_offer"
  })
}

/* WITHDRAW */
function submitWithdraw(){
  const amt = parseFloat(document.getElementById("amount").value)
  if(amt < 399){
    alert("Minimum withdrawal â‚¹399")
    return false
  }

  const body =
`Telegram ID: ${telegram_id}
Name: ${name.value}
UPI: ${upi.value}
Amount: â‚¹${amt}`

  window.location =
`mailto:YOUR_EMAIL@gmail.com?subject=Withdrawal Request&body=${encodeURIComponent(body)}`
  return false
}
</script>

</body>
</html>
